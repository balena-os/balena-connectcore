- commits:
    - subject: Remove versionist package.json
      hash: db2af415174f1f225af750a51dc562da6bde72b6
      body: |
        This is a leftover from 88d6af15d1ee67f13a4cc6fd412426feb07df4df where
        the local test versionist files were removed.
      footer:
        Changelog-entry: Remove versionist package.json
        changelog-entry: Remove versionist package.json
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.16+rev9
  title: "'versionist: Remove package.json'"
  date: 2022-02-28T18:33:21.628Z
- commits:
    - subject: Update balena-yocto-scripts to v1.17.2
      hash: 3ce4da7de22c633b07536ebcc3b1ee7746f2ed16
      body: |
        Update balena-yocto-scripts from v1.17.0 to v1.17.2
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.17.2
        changelog-entry: Update balena-yocto-scripts to v1.17.2
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "prepare-and-start: Remove balena login"
              hash: 67568d3a5eceb45ee65c245baae18fa299366f9e
              body: |
                The login will happen as needed.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.17.2
          title: "'prepare-and-start: Remove balena login'"
          date: 2022-02-25T09:19:00.323Z
        - commits:
            - subject: "balena-deploy.inc: Do no deploy device logo to deprecated endpoint"
              hash: 54ad619b8b9c00d7c52cfc90593b22c70233d973
              body: |
                As per https://jel.ly.fish/a533a6bd-1c98-412c-ae60-8427e3f7b005,
                the /device-types/v1 endpoint is deprecated and we can remove
                the logo from the device repos so we can also stop handling it
                from here. Instead, the logo will be used from the hw contracts.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: balena-yocto-scripts-1.17.1
          date: 2022-01-27T07:38:18.417Z
  version: 2.85.16+rev8
  title: "'balena-yocto-scripts: Update to v1.17.2'"
  date: 2022-02-26T16:21:37.122Z
- commits:
    - subject: Update balena-yocto-scripts to v1.17.0
      hash: 9d0c322c13b1f389e0ec03ea68b1e27317bac2b6
      body: |
        Update balena-yocto-scripts from v1.16.3 to v1.17.0
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.17.0
        changelog-entry: Update balena-yocto-scripts to v1.17.0
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-lib: Fix fetching meta-balena base version"
              hash: d5d838339ed23ecd242092bf4214fe2505ccd181
              body: >
                On an ESR branch the VERSION file contains the ESR version, not
                the

                base meta-balena version.


                Replace it with searching down the git tree for the commit before the

                branch.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-block: Use true/false for ESR variable"
              hash: 24876740b2299d092ea3cd1b54f61a020d12a5ba
              body: |
                Keep the same boolean format as in the rest of the files.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Label ESR hostapps"
              hash: 1c6561daf9f16e579d55305471274e7793dc3619
              body: >
                ESR hostapps need special labels in order to be recognized. This
                commit

                adds the esr-current, esr-next and esr-sunset labels.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: add balena_api_fetch_fleet_tag"
              hash: 2ced90fc432298abf14e00d4ac58cc8eaf003b24
              body: |
                Add a function to retrieve fleet tags.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Set policy on ESR hostapps"
              hash: 6e4d7b3d2ccbd1a5c67d94cc73c4552775ce3b94
              body: >
                ESR hostapps need an esr release-policy in order to be
                recognized.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Pass ESR variable when creating apps"
              hash: 2497bfb59ae16810169718e6d383d0bc9d564a04
              body: >
                ESR hostapps need special labels in order to be recognized. This
                allows

                to add those flags when creating the hostapp.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.17.0
          date: 2022-01-20T12:30:21.992Z
        - commits:
            - subject: "balena-deploy: Deploy passing the latest meta-balena version and not
                tag"
              hash: 9d5fa316dbda3d4782e782abaceed41efe3e5a99
              body: >
                The last meta-balena version and tag might not be the same, like
                in the

                case of ESR branches.


                Fixes #249
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: Add balena_lib_get_meta_balena_base_version"
              hash: 25840dc98e138781e78530be0437f3950970f263
              body: >
                Retrieves the last meta-balena version, which may not be the
                same as the

                last meta-balena tag.


                For example, when we branch an ESR release, the meta-balena branch is

                tagged with the ESR name, like 2.83.x, while the last meta-balena version

                will be a proper semver.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.4
          date: 2022-01-18T09:50:54.889Z
  version: 2.85.16+rev7
  date: 2022-01-21T11:49:46.168Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.3
      hash: bf9e03000826c7b25a1a84f5e887ba70b4007b20
      body: |
        Update balena-yocto-scripts from v1.16.2 to v1.16.3
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.3
        changelog-entry: Update balena-yocto-scripts to v1.16.3
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-deploy-block: Check for existing tag only in specific hostapp"
              hash: 8893fd94bc0cc31a7fa7af8a87af68a69fec908d
              body: |
                The same version tag can exist across different hostapps.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.3
          date: 2022-01-17T17:18:11.734Z
  version: 2.85.16+rev6
  date: 2022-01-18T14:10:46.145Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.2
      hash: 566d5af8c50c657b6ca5f524a9c8a40b04a17fbe
      body: |
        Update balena-yocto-scripts from v1.16.1 to v1.16.2
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.2
        changelog-entry: Update balena-yocto-scripts to v1.16.2
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-api: Propagate balena API environment, token and OS
                organization"
              hash: 64c2854c85aafebf80e6a13b725ff610ae25a467
              body: >
                This is required to allow building against cloud instances with

                different names for the balenaOS organization and private device types.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-build.sh: Propagate balena API environment and token"
              hash: 35d39c4a400df0552bfb3d875c8a9d1289ad8d4e
              body: |
                This is required to use the API for private slugs.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "prepare-and-start: Propagate balena API environment and token"
              hash: bb7b903e00fc153afea182a330da08a49b72cced
              body: >
                The balena-build.sh script accepts a token in the command line.
                This

                commit modifies the prepare-and-start.sh script to use it if

                available, and also modifies it to take into account the balena

                environment too.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.2
          date: 2022-01-15T16:04:34.389Z
  version: 2.85.16+rev5
  date: 2022-01-15T17:02:24.182Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.1
      hash: 0d8358c1d9db1c94374a8d6cb5e4ef1fa4091e2f
      body: |
        Update balena-yocto-scripts from v1.16.0 to v1.16.1
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.1
        changelog-entry: Update balena-yocto-scripts to v1.16.1
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "revert_overrides: Add intel-quark to architecture overrides"
              hash: cbcbbc42c10700c77e17d8f9224e35bec90280fe
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.1
          date: 2022-01-11T14:37:00.027Z
  version: 2.85.16+rev4
  date: 2022-01-14T09:50:51.364Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.0
      hash: f69307ecb5105e744b94643103bc05b3597cacd8
      body: |
        Update balena-yocto-scripts from v1.14.9 to v1.16.0
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.0
        changelog-entry: Update balena-yocto-scripts to v1.16.0
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-deploy: Check for file existence before deploying"
              hash: 36494bf99a08b68a5afac5038d4691a583d01500
              body: >
                When discontinuing a device type, there are no artifacts apart
                from

                device-type.json, so check that the logo is there before deploying.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Check existence of tag before re-deploying"
              hash: c1a5b20b0ef0d04a30b6bf0bcfacf0a527e931ae
              body: >
                If a release is already tagged with this version, issue a
                warning and

                bail out.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Add function to check the existence of a release tag"
              hash: bdc2146c3ad719f5c7335aeb7b4ee43775a20ac7
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Finalize releases when deployed"
              hash: 1e3768132d87295998bd9a17d0f01121e161e312
              body: >
                For now and until a proper CI/CD workflow is in place, finalize
                releases

                on deployment.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Accept deployments without balena.yml
              hash: 23c1f91993f37a18ade26ceef621e24409be5f74
              body: >
                If no balena.yml file exists, the deployment will go through
                without

                setting a release semver.


                For the time being we are still using a version label in the hostapp.


                This commit will be reverted once we get rid of the version label.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Accept deployments without balena.yml
                changelog-entry: Accept deployments without balena.yml
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_generate_ami: Remove variant from image name"
              hash: 0fe3d6c8d0ebff85248f0bed99750186f05ab686
              body: |
                The OS is now a unified image so there are no variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-build.sh: Stop building OS variants"
              hash: 4e65c83e7808e91c99e335609142401e0031ed23
              body: |
                The OS is now a unified image so there are no variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build.sh: Remove buildFlavor"
              hash: b66f7ce58f0c12f78941ed34eb311bbd3a96af1c
              body: |
                The OS is now a unified image so there are no build flavours.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-blocks: Remove variant build option"
              hash: e7fb9fc8354445bcbc05687e1f96aa0e8025ecc9
              body: |
                The OS is now a unified image without variants.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Stop using .dev/.prod variant suffixes"
              hash: 65c030b986f62b0faaddba501520662a8ac2777d
              body: >
                The OS has now a unified image that can be configured to be
                development

                or production mode.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Stop tagging hostapp releases with variant"
              hash: 3fc5efeeef4ae74e499504c1148932539a49c28e
              body: >
                The API will stop using the variant tag but will still use the
                version

                tag.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: Use externalVersion to match contracts"
              hash: 385c5bacfc1452e4b065de55bfdf71727b303fff
              body: >
                The version refers to the actual contract, while the
                externalVersion is

                the one that refers to the balenaOS revision.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build: Deploy hostapp like any other block"
              hash: bfe7f51dc75f335d38fa4dbf824fa887be8d82ee
              body: |
                Use common functions for block deployments
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-blocks: Separate block build release deployment"
              hash: 70fe00969921bbf6894cc86ecb343eb342c6f2ca
              body: >
                Separating the build and release of blocks allows to use common
                code for

                block release.


                Also, pass a flag to specify whether the block should be deployed as final

                release.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Use release versioning"
              hash: d1c74d0261f17ebcad9825bc7e0df22142da14a3
              body: >
                Deploy as draft releases by default. Final releases will be
                flagged

                once validation passes.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build: Remove discontinued check"
              hash: 55774ee27f938bbcbb238aa6441680b3d39172c3
              body: >
                Individual deploy functions now bail out for discontinued device
                types,

                there is no need to check for it here.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Do not deploy discontinued device types"
              hash: f54251e61c466018072e04c344595b3eba70bf57
              body: >
                Check for discontinued device types before deploying to
                dockerhub or

                to balenaCloud.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Discontinued device types use meta-balena version"
              hash: bbecd72c64bf8ff1277a10c03cb39fbf99748e05
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Adapt balena_deploy_block to release versioning and use
                it"
              hash: cfc0bc43af1fb60ff3ddd56f08ae781edaa90b68
              body: >
                * Convert balena_deploy_build_block to balena_build_block, and
                deploy
                  with balena_deploy_block
                * Remove balena_deploy_hostapp and replace with balena_deploy_block

                * Modify balena_deploy_hostos to use balena_deploy_block

                * Modify balena_deploy_block to use release versioning


                By deafult image deployments happen as draft versions, and only become

                final when passing validation.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-build-block: Remove image release"
              hash: 443269afbe867cb5c464ca5dd91bf27aa51427bd
              body: >
                Deal with the release separately so we can use common code for
                it.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Use release revision for fetchers"
              hash: f501ac55e327af0db2142a146423e83f459e0c1f
              body: >
                When fetching images for blocks, use a given release revision.


                Also, add token autentication to the API calls that miss it so that they work

                with private device types.


                Finally, fix indentation.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-block: Remove release version API setter"
              hash: 8e27328a0caec2acc7651dfe64f8dfc5510e48e0
              body: >
                When using the now deprecated release_version field, the API
                would

                reject deployments for an existing release.


                On the new versioning model, deployments increment a revision field so

                there is no need to check for uniqueness.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Remove release version API setter"
              hash: 42486a59654047cf42f19bd999ef0bcd0a279ea5
              body: >
                This functionality has now been deprecated in the balena API is
                favour

                of draft/final release versioning.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: Use release versioning"
              hash: de2c7af440c1ae4d6f84c5440368f92333500389
              body: >
                BalenaCloud has now a release versioning feature that deprecates
                the

                use of release_version.


                Introduce a new balena_lib_release() function that utilises a balena

                contract and the CLI to set the release version.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.0
          date: 2021-12-30T15:08:43.225Z
        - commits:
            - subject: "balena-deploy: Set leviathan networkWireless mode based on device
                slug"
              hash: 891fadcbabe422e24245beb720cf7326a5ea1136
              body: >
                These changes are currently made in the Jenkins job, so it's
                preferrable

                to have it done by the packaging scripts.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.15.10
          date: 2021-12-02T21:08:09.863Z
        - commits:
            - subject: Substitute the worker types for generic device slugs
              hash: 7539caf732975a5b114abc371a5f6df211d12812
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.15.9
          date: 2021-11-26T19:20:31.029Z
        - commits:
            - subject: "Dockerfile_yocto-build-env: Install Honister host deps"
              hash: efc069c609431965394912d3ffd34362a1108852
              body: >
                See
                http://docs.yoctoproject.org/next/migration-guides/migration-3.4.html#new-host-dependencies
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: balena-yocto-scripts-1.15.8
          date: 2021-11-03T10:01:44.980Z
        - commits:
            - subject: "jenkins_build.sh: Fix deployment for discontinued device types"
              hash: 84e65e937fef38625277fb8330ebd3179c466d04
              body: >
                Do not deploy dockerhub or hostapp images for discontinued
                device types.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build.sh: Remove PRIVATE_DT as it is unused"
              hash: 35fd54620ff5eb487b1323a1ead5fef9c157e385
              body: >
                The private device types status is checked with the API when
                required.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build.sh: Fix lint warnings"
              hash: 068a4197101a2db4aba60793e01564b67d14f820
              body: |
                Fix some minor lint warnings.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.15.7
          date: 2021-10-25T16:57:03.955Z
        - commits:
            - subject: "balena-generate-ami.sh: wait for boot partition when preloading AMI"
              hash: d2ea170a86810a782eeb241e178d4ad72c4939b0
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.6
          date: 2021-10-21T15:04:37.774Z
        - commits:
            - subject: "jenkins_generate_ami.sh: Use a shared directory for preloaded image"
              hash: 9b032f2fddc970db13147b4e637abd1bada1f234
              body: >
                The previous commit moved the preloaded image out of yocto
                cache, which

                made it unreachable from the balena-generate-ami-env container.


                This patch makes mktemp create the file back within yocto cache to ensure

                this is shared yet still each concurrent process can safely have its own copy.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.5
          date: 2021-10-21T04:50:17.146Z
        - commits:
            - subject: "barys: update development image variables"
              hash: 427510332026ca8636dedb6630632a740b481374
              body: |
                Update the DEVELOPMENT_IMAGE references to use OS_DEVELOPMENT
                following the changes to the handling of OS variants.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "barys: update development image variables"
                changelog-entry: "barys: update development image variables"
                Signed-off-by: Mark Corbin mark@balena.io
                signed-off-by: Mark Corbin mark@balena.io
              author: Mark Corbin
              nested: []
          version: balena-yocto-scripts-1.15.4
          date: 2021-10-20T09:40:14.890Z
        - commits:
            - subject: "jenkins_generate_ami.sh: Preload outside of yocto cache"
              hash: fb1763984d76218adc2510da6cb673fbad7197be
              body: >
                Since the file name is hardcoded at this moment, this fails when
                two

                builds are running in parallel (e.g. dev and prod variants during deploy)

                because they try to preload the same file at pretty much the same moment.

                Having a separate copy for each outside of yocto cache should fix the issue.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.3
          date: 2021-10-20T05:12:57.093Z
        - commits:
            - subject: "balena-generate-ami.sh: correctly mount boot partition when injecting
                SSH key"
              hash: c0f6da3e4fe3f9c51ba8b279986a6f4baffe6d96
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.2
          date: 2021-10-01T14:45:58.407Z
        - commits:
            - subject: Update balena-cli to 12.50.1
              hash: 700ebe6d06385440488a42c42179d19434376209
              body: >
                This is necessary for AMI preloading to work, additionally

                it has been more than a year since the last update, we should keep up.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-cli to 12.50.1
                changelog-entry: Update balena-cli to 12.50.1
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.1
          date: 2021-10-01T10:11:14.438Z
        - commits:
            - subject: "jenkins_generate_ami.sh: Use lib function to get arch from
                config.json"
              hash: fffe9ffb363c9eed783a5055e69847c81eb68bcd
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Look for boot partition by label rather than
                hardcoding p1"
              hash: 45786e701d05811f96d0aeef20481442bb1d0f1c
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Fail if AMI already exists"
              hash: 9e9a792aed2a659c1ed7327237a61594033b308a
              body: >
                This was only ignored for development purposes, we should not
                replace

                released images.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: sync after writing config.json"
              hash: f0838aaee9751a6fb60558a7646d597b1f99b1c3
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Stick to POSIX-compliant [ instead of [["
              hash: 2c6a97c263a71c63387290fca29ba5b01eba8db4
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Remove useless statements"
              hash: 9d4ac02f3ad8eadaed79703dbc859c4950449810
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "jenkins_generate_ami.sh: Use architecture as suffix instead of machine
                name"
              hash: 7d2e3911defedc500b3b1ded3268dbe74bb523b0
              body: >
                This removes the necessity for the DT being named generic-*. It
                also means

                all the DTs of the same architecture will preload the same app.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "jenkins_build.sh: pass MACHINE to jenkins_generate_ami.sh"
              hash: 0e33582e2860474e1c6aff5275539b1333aef6b9
              body: >
                This removes the dependency on JOB_NAME from
                jenkins_generate_ami.sh
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "AMI automation: Adjust AMI names to be compatible with AWS API"
              hash: bc91b7036b32aa57c053c115ac87b7f21fa634c8
              body: ""
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: "AMI automation: Correct S3 bucket name and key"
              hash: 8864adcb20c1f4cbfd48e422dbae44b885c8ca06
              body: ""
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: "AMI automation: Add a separate container for generaing AMI"
              hash: d7d91ff4c3ea655dfa9a483a020d2d16aa5e0f49
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "AMI automation: shellcheck and resolve violations"
              hash: 6b11dd26bc1229aafed98c5933f23e892811f49f
              body: ""
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: "AMI automation: Use staging env by default"
              hash: 21fa55a6f73faf59fe5fc3b1e6e8bc4084e17c01
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
            - subject: "AMI automation: Simplify public ssh addition. Do not use sudo"
              hash: dd96771607f79620a241e4dee99879542643f55f
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
            - subject: "automation: Generate and publish AMI from the raw balenaOS image"
              hash: efe2b5beb5ea6b00fff07372a312c7e0c690654b
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
          version: balena-yocto-scripts-1.15.0
          date: 2021-10-01T04:12:24.310Z
  version: 2.85.16+rev3
  date: 2021-12-30T18:42:00.139Z
- commits:
    - subject: Remove versionist and balena.yml
      hash: 88d6af15d1ee67f13a4cc6fd412426feb07df4df
      body: |
        These were only used to test versioninst changes which are now in
        production.
      footer:
        Changelog-entry: Remove versionist and balena.yml
        changelog-entry: Remove versionist and balena.yml
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.16+rev2
  date: 2021-12-30T16:09:31.037Z
- commits:
    - subject: Remove device type name from contract
      hash: 592ca434a12dc7c6c73968da15a15c720d5e9b5f
      body: |
        Device repositories typically build several devices types, so let's keep
        this global contract generic.
      footer:
        Changelog-entry: Remove device type name from contract
        changelog-entry: Remove device type name from contract
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.16+rev1
  date: 2021-12-02T15:19:04.020Z
- commits:
    - subject: Update meta-balena from v2.85.15 to v2.85.16
      hash: 9ce595715a8879994842d761b47190a1405e32d1
      body: |
        Update meta-balena from 2.85.15 to 2.85.16.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.85.15 to v2.85.16
        changelog-entry: Update meta-balena from v2.85.15 to v2.85.16
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.16
  date: 2021-12-02T14:47:10.197Z
- commits:
    - subject: Update meta-balena from v2.85.14 to v2.85.15
      hash: ec8fe8214a78d4e9efc17128d7fa2c92b6fc0a1d
      body: |
        Update meta-balena from 2.85.14 to 2.85.15.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.85.14 to v2.85.15
        changelog-entry: Update meta-balena from v2.85.14 to v2.85.15
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.15
  date: 2021-12-02T13:22:52.394Z
- commits:
    - subject: Update versionist
      hash: f368392e2f76ba5f24e75b51e1976ce4be33ae4f
      body: |
        This will allow to test the balena-versionist changes before merging.
      footer:
        Changelog-entry: Update versionist
        changelog-entry: Update versionist
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.14+rev2
  date: 2021-12-01T13:14:20.392Z
- commits:
    - subject: Add name to balena contract
      hash: aad935ccec86a509c5181015bd3a813a90bed93e
      body: |
        Use the hostapp name in the balena contract too.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Add name to balena contract
        changelog-entry: Add name to balena contract
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.14+rev1
  date: 2021-11-16T20:16:50.831Z
- commits:
    - subject: Update meta-balena from v2.85.13 to v2.85.14
      hash: 73f17e72c8a01e41f323846d475907858bd4923e
      body: |
        Update meta-balena from 2.85.13 to 2.85.14.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.85.13 to v2.85.14
        changelog-entry: Update meta-balena from v2.85.13 to v2.85.14
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.14
  date: 2021-11-16T19:45:11.952Z
- commits:
    - subject: Update meta-balena from v2.85.12 to v2.85.13
      hash: e3e848da8ff36df1c89d6f83936bc4ffbfd44527
      body: |
        Update meta-balena from 2.85.12 to 2.85.13.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.85.12 to v2.85.13
        changelog-entry: Update meta-balena from v2.85.12 to v2.85.13
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.13
  date: 2021-11-16T16:06:36.604Z
- commits:
    - subject: Update versionist
      hash: 83b38f299a27b6e03ad14f0cb830c74ae8788663
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update versionist
        changelog-entry: Update versionist
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.12+rev2
  date: 2021-11-16T15:11:08.526Z
- commits:
    - subject: Update versionist
      hash: daf01ac6fab641bd3a9cff47253d285c9af2fa35
      body: ""
      footer:
        Changelog-entry: Update versionist
        changelog-entry: Update versionist
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.12+rev1
  date: 2021-11-16T13:26:33.279Z
- commits:
    - subject: Update meta-balena from v2.85.11 to v2.85.12
      hash: 0c05cbeeb7df8a1b744ce451ae81cc1f67eaf3f2
      body: |
        Update meta-balena from 2.85.11 to 2.85.12.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.85.11 to v2.85.12
        changelog-entry: Update meta-balena from v2.85.11 to v2.85.12
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.12
  date: 2021-11-15T20:01:49.393Z
- commits:
    - subject: Update versionist
      hash: 44e5ad6d48cf2d5bae6ceee5f519f922d160e159
      body: ""
      footer:
        Changelog-entry: Update versionist
        changelog-entry: Update versionist
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.11+rev2
  date: 2021-11-15T19:44:25.117Z
- commits:
    - subject: update versionist to work with ESR
      hash: 7a3cb70f8733e541a05520c425df9c3f0f01fef5
      body: ""
      footer:
        Changelog-entry: update versionist to work with ESR
        changelog-entry: update versionist to work with ESR
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.11+rev1
  date: 2021-11-15T17:36:31.587Z
- commits:
    - subject: Add a basic contract
      hash: 0192e7e09821483b5a80e82d31fce34866c408a6
      body: >
        This will be used to set the deploy version for the fleets. Note that
        the

        contract version needs to match the meta-balena version and until versionbot

        is updated it needs to be manually updated with the meta-balena layer.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Add a basic contract
        changelog-entry: Add a basic contract
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Update meta-balena from v2.85.10 to v2.85.11
      hash: b96f844ccac4503eced28b84bd1af6b9524fccde
      body: |
        Update meta-balena from 2.85.10 to 2.85.11.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.85.10 to v2.85.11
        changelog-entry: Update meta-balena from v2.85.10 to v2.85.11
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Add a local versionist.conf.js
      hash: 9b6b6b7e4f49b83cd9276572679a9228b29848bc
      body: |
        This is a temporary way to test changes to versionist.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Add a local versionist.conf.js
        changelog-entry: Add a local versionist.conf.js
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.11
  date: 2021-11-12T19:59:33.258Z
- commits:
    - subject: Update meta-balena from v2.80.1 to v2.85.10
      hash: d17bd6b501a33991b4de13d2c7cf62dc7503d540
      body: |
        Update meta-balena from 2.80.1 to 2.85.10.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.80.1 to v2.85.10
        changelog-entry: Update meta-balena from v2.80.1 to v2.85.10
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.85.10+rev1
  date: 2021-10-27T15:06:35.866Z
- commits:
    - subject: Update balena-yocto-scripts from v1.14.6 to v1.14.9
      hash: 012235be1d2e30197340f4b7022bce4e25a37934
      body: |
        Update balena-yocto-scripts from 1.14.6 to 1.14.9
      footer:
        Changelog-entry: Update balena-yocto-scripts from v1.14.6 to v1.14.9
        changelog-entry: Update balena-yocto-scripts from v1.14.6 to v1.14.9
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-deploy: When deploying hostapp default to using slug as name"
              hash: d9ee5fa5f5a97de9c41c2acc13b6c7335e2b043f
              body: >
                Using the device type is incorrect as aliases are not taken into
                account.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Do not use balena_lib_resolve_aliases"
              hash: d50cee134436914b4960254abd0a5cf28b40f764
              body: >
                That function is now for internal use, replace with
                balena_lig_get_slug()

                which is clearer.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena_lib: Make resolve_aliases local so it is not globally used"
              hash: 45a0f62debdbf9e20d56e8bba8a9567359d7e8e4
              body: >
                The correct call is balena_lib_get_slug(device_type), which
                resolves

                aliases too.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.14.9
          date: 2021-08-20T17:33:15.811Z
        - commits:
            - subject: Use slug when setting deviceType for leviathan
              hash: bc628771aa0014e86e649e3312b48e1c7ae4968c
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.14.8
          date: 2021-07-22T14:51:50.560Z
        - commits:
            - subject: "balena-lib: Fix print statements helper functions"
              hash: 45ccecc6945a06c3975c4ffc782bef5770f30ae7
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: "balena-lib: Fix device dir when running in Jenkins containers"
              hash: 95530d134ea729359e7e1e19fac109dd6d40ca5c
              body: |
                Avoid returning an empty path when we are running in containers
                where /work does not exist.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.14.7
          date: 2021-06-29T20:20:09.994Z
  version: 2.80.1+rev2
  date: 2021-09-24T09:33:47.694Z
- commits:
    - subject: Update meta-balena from v2.79.6 to v2.80.1
      hash: 025a0359bd0df5e1879e306a8a32cd45667c4a27
      body: |
        Update meta-balena from 2.79.6 to 2.80.1.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.79.6 to v2.80.1
        changelog-entry: Update meta-balena from v2.79.6 to v2.80.1
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Update balena-yocto-scripts from v1.14.3 to v1.14.6
      hash: d16c9089d8be0e95f1c61c8c875cbfb040ac59f4
      body: |
        Update balena-yocto-scripts from 1.14.3 to 1.14.6.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update balena-yocto-scripts from v1.14.3 to v1.14.6
        changelog-entry: Update balena-yocto-scripts from v1.14.3 to v1.14.6
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.80.1+rev1
  date: 2021-06-18T11:49:40.359Z
- commits:
    - subject: Update meta-balena from v2.79.7 to v2.80.0
      hash: f06569a1090cfe231e8f2b7d79be84c34162f706
      body: ""
      footer:
        Changelog-entry: Update meta-balena from v2.79.7 to v2.80.0
        changelog-entry: Update meta-balena from v2.79.7 to v2.80.0
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Update balena-yocto-scripts from 1.14.1 to 1.14.3
      hash: 778387d85b184a3be109735d5de48abe5fcba81f
      body: |
        Update balena-yocto-scripts from 1.14.1 to 1.14.3
      footer:
        Changelog-entry: Update balena-yocto-scripts from 1.14.1 to 1.14.3
        changelog-entry: Update balena-yocto-scripts from 1.14.1 to 1.14.3
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-api: Filter out debug output"
              hash: bbb7ec875bd4b0d56c878187eb1d00e8d450b5d8
              body: |
                Change a json dump for a debug function call.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Specify API environment and token when setting app roles"
              hash: c2402322ef608cb207494c37ade33a531734d9ca
              body: |
                The defaults only work with the production environment.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-blocks: Separate recipes and packages"
              hash: 0b7c0a0a14141bbeb6b29171763cac99d68d9830
              body: >
                Currently we are reading a package list from the contracts that
                mixes

                recipe and package names, and we run bitbake with the `-k` flag not to

                stop the build when a package name fails to match a recipe.


                The contracts have now been modified to specify either a `sw.recipe.yocto`

                or a `sw.package.yocto` so we can distinguish between them and use

                recipe names to build and package names to install.


                We also remove the continue flag from bitbake.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: Generalize contract fetcher"
              hash: 2d01048848734b580b89bfdd41df13ef10a8d31f
              body: >
                Instead of fetching a package list, fetch a composedOf list
                passing a

                type. This allows to fetch `sw.package` and `sw.recipe` types.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Shorten installation directory '/yocto/resin-board' to
                '/work'"
              hash: 20baa1d287d95f95cb84797586afa73ed52f2db1
              body: >
                The installation directory is currently "/yocto/resin-board".
                This is

                too long for the creation of per-task balena-engine sockets which have

                a maximum path length of 104 characters.


                This commit replaces the installation directory with "/work".
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Conditional verbosity mode
              hash: 6bb1fa2d08c2e3128b5a02588cb009ded98eb0da
              body: |
                Also, fix some linter warnings.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.14.3
          date: 2021-06-01T11:48:30.209Z
        - commits:
            - subject: "balena-lib: Add function to fetch labels from image"
              hash: a987a933ad52af6c7935b19f13f4f39f0be157f1
              body: |
                Image labels are used to handle the installation of images.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: contracts: Add package list fetcher"
              hash: f2e5ce081f9ef39bcff364ce4a8e9a9d0d806590
              body: >
                Add functions to retrieve a package list from a sw.package
                contract where

                a yocto package based hostos block is defined.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "semver: Add bash utility for semantic version comparison"
              hash: 831c494a1bc1f286a9b95f22cc86ade46f336a89
              body: >
                From https://github.com/Ariel-Rodriguez/sh-semversion-2


                MIT licensed: https://github.com/Ariel-Rodriguez/sh-semversion-2/blob/main/LICENSE
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-docker: Add image retrieval function"
              hash: 79d8a1b201196e2730bcf1d92c8be19dbd693106
              body: |
                Common image retrieval code.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.14.2
          date: 2021-05-26T09:34:20.890Z
    - subject: Switch storage driver to overlay2
      hash: 1902695ab51f4834ec3ef7c05196753d8e179015
      body: |
        This effectively changes the storage driver from aufs to overlay2.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Switch storage driver to overlay2
        changelog-entry: Switch storage driver to overlay2
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.80.0+rev1
  date: 2021-06-08T11:25:57.876Z
- commits:
    - subject: Update meta-balena from v2.79.4 to v2.79.7
      hash: 1c0abd5b7aa46f35d790873c95f253b805f3b73d
      body: |
        Update meta-balena from 2.79.4 to 2.79.7
      footer:
        Changelog-entry: Update meta-balena from v2.79.4 to v2.79.7
        changelog-entry: Update meta-balena from v2.79.4 to v2.79.7
        Signed-off-by: Mark Corbin <mark@balena.io>
        signed-off-by: Mark Corbin <mark@balena.io>
      author: Mark Corbin
      nested:
        - commits:
            - subject: "meta-balena: rename connectivity packagegroup"
              hash: 8f54c4137f8bb8a83a05d9963cdb1565778c737b
              body: |
                Rename the resin-connectivity packagegroup.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "meta-balena: rename connectivity packagegroup"
                changelog-entry: "meta-balena: rename connectivity packagegroup"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.79.7
          date: 2021-05-26T15:03:08.108Z
        - commits:
            - subject: "bluez5: Use bluez5 recipe from poky master"
              hash: fe3c870eef75927eac740bbc1e8e15b8ed9c7341
              body: |
                This commit brings the bluez5 recipe from poky master as we need
                to control which bluez5 version is used in meta-balena.

                The code originates from poky's master branch -
                c887238347295c87dacf8a08e6d703603436d0bc.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.79.6
          date: 2021-05-26T08:26:16.310Z
        - commits:
            - subject: "README: Update supported Yocto versions"
              hash: cdbf76ccbaaf6e265f8432eca10d42e55b6969e8
              body: >
                Add the warrior and dunfell versions to the list of tested
                releases.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.79.5
          date: 2021-05-21T20:01:11.657Z
    - subject: "balena-connectcore: rename connectivity packagegroup"
      hash: b276ca38727dc0ada28d00d6a4554f544ab35606
      body: |
        Rename the resin-connectivity packagegroup.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: "balena-connectcore: rename connectivity packagegroup"
        changelog-entry: "balena-connectcore: rename connectivity packagegroup"
        Signed-off-by: Mark Corbin <mark@balena.io>
        signed-off-by: Mark Corbin <mark@balena.io>
      author: Mark Corbin
      nested: []
  version: 2.79.7+rev1
  date: 2021-06-08T10:49:57.338Z
- commits:
    - subject: Update meta-balena from v2.79.4 to v2.79.6
      hash: ec4b04eb18e5aa2e68610a1da69df3990896e33c
      body: |
        Update meta-balena from 2.79.4 to 2.79.6.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.79.4 to v2.79.6
        changelog-entry: Update meta-balena from v2.79.4 to v2.79.6
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.79.6+rev1
  date: 2021-06-08T09:53:54.125Z
- commits:
    - subject: Add balena-yocto-scripts to upstream sources in repo.yml
      hash: ffa7cb0b86bd78bac288776d63a31555cb5d9ef4
      body: |
        Allows to provided nested changelogs for balena-yocto-scripts.
      footer:
        Changelog-entry: Add balena-yocto-scripts to upstream sources in repo.yml
        changelog-entry: Add balena-yocto-scripts to upstream sources in repo.yml
        Change-type: patch
        change-type: patch
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Update meta-balena from v2.72.1 to v2.79.4
      hash: 6741bc3128a66edacbc5f9c5cefcd42c172b277a
      body: |
        Update meta-balena from 2.72.1 to 2.79.4.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.72.1 to v2.79.4
        changelog-entry: Update meta-balena from v2.72.1 to v2.79.4
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Update  balena-yocto-scripts from v1.11.1 to v1.14.1
      hash: ad602fa71da84fa04ef5ba127113b6b5538713b0
      body: |
        Update balena-yocto-scripts from 1.11.1 to 1.14.1
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update  balena-yocto-scripts from v1.11.1 to v1.14.1
        changelog-entry: Update  balena-yocto-scripts from v1.11.1 to v1.14.1
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: Add a parsable representation of the changelog
              hash: 9bbc4207170e8db4e79c0d139653570fdc013f95
              body: >
                This file allows other components to uniquely parse the
                information that

                is contained in the changelog. It will be automatically managed by

                versionist by appending the new commits on top. This is needed to

                provide nested-changelogs.


                Generated with product-os/versionist/blob/master/scripts/generate-changelog.sh
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Add a parsable representation of the changelog
                changelog-entry: Add a parsable representation of the changelog
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.14.1
          date: 2021-05-24T09:59:21.687Z
        - version: balena-yocto-scripts-1.14.0
          date: 2021-05-21T19:44:08.000Z
          commits:
            - hash: 5999d8421b8cb83f42ecbd98201b2b5b9ff9648c
              author: Alex Gonzalez
              footers:
                change-type: patch
                changelog-entry: Add yocto-block-build-env container to build Yocto based hostOS
                  blocks
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "Dockerfile_yocto-block-build-env: Add container to build Yocto based
                hostOS blocks"
              body: >-
                This container is based on the `balena-push-env` helper
                container and includes

                an opkg application built from source. It is used to build Yocto IPK packaged

                based hostOS blocks.
            - hash: dcb1ee52f56d4785cc4a6b93d33c2b63f2bcda12
              author: Alex Gonzalez
              footers:
                change-type: patch
                changelog-entry: Balena build and deploy a hostOS yocto ipk block image
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build-block: Balena build and deploy a hostOS block image"
              body: Balena builds and deploys a hostOS block from a Yocto ipk package feed.
            - hash: 285e72e2107b5c7693ebe70ee5041d2001507f98
              author: Alex Gonzalez
              footers:
                change-type: minor
                changelog-entry: Add script to build hostOS blocks
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build-blocks: Add package blocks builder script"
              body: This script builds hostOS blocks as defined in their contract
                specification.
            - hash: 5f6a285d43ce7b161601174b11d7c9b8771b9799
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy: Add functions to deploy block, feed and OS release"
              body: Add the logic for block and OS deployment.
            - hash: 1b551c71da050d84005f80cd076ec9abe8569b0a
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "README: Add brief introduction to the main scripts"
              body: >-
                Add a short description of the helper build scripts that this
                repository

                offers.
        - version: balena-yocto-scripts-1.13.0
          date: 2021-05-19T11:16:23.000Z
          commits:
            - hash: 2f185e83de39c9e18aedafe9afe55a18758d6696
              author: Alex Gonzalez
              footers:
                change-type: minor
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "barys: Replace supervisor tag with supervisor release version"
              body: >-
                The latest meta-balena fetches the supervisor from the internal
                registry

                using the release version.
            - hash: 74a5bcaa4761f1f0bdf7ea8fba153540d33e2313
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Replace supervisor tag with supervisor release"
              body: >-
                The latest meta-balena fetches the supervisor from the internal
                registry

                using the release version.
            - hash: 84958c3687ca2424903414ed2304937e11776b16
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Rename metaResinBranch to metaBalenaBranch"
              body: Rename variables to match current brand.
        - version: balena-yocto-scripts-1.12.16
          date: 2021-05-18T16:10:59.000Z
          commits:
            - hash: 1b138ac2f6f5a1751947a5a28e64f80747244069
              author: Kyle Harding
              footers:
                change-type: patch
                signed-off-by: Kyle Harding <kyle@balena.io>
              subject: "tests: Substitute deviceType with MACHINE when packaging tests"
              body: null
        - version: balena-yocto-scripts-1.12.15
          date: 2021-05-18T16:05:32.000Z
          commits:
            - hash: 5dd3cd943d76d06835bcf6a6233cc2060bd230b9
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "Dockerfile_yocto-build-env: Specify docker version"
              body: >-
                This matches as closely as possible the version of the dind
                container

                used in the Yocto build.
            - hash: 830377a4530fa755334b2060a732a944122c86b4
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-docker: Allow to control iptables and ipmasq flags"
              body: >-
                When running multiple daemons, we don't want them to clash
                managing

                iptables so we start redundant daemons with iptables and ipmasq set to

                false.

                By default we enable both which is the current dockerd default.

                When running a single docker daemon without the iptables and ipmasq flags,

                containers on the default bridge network cannot communite with the

                outside as no iptables rules are set.
        - version: balena-yocto-scripts-1.12.14
          date: 2021-05-17T17:08:35.000Z
          commits:
            - hash: bc841cf22273bc24f1b6710e8d4c95adaa8e1908
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Set default argument value not to exist on nounset
                setting"
              body: >-
                Scripts sourcing balena-api might set nounset, so assign empty
                values

                to optional arguments not to trigger an early exit.
            - hash: 094faf7defe8f3e5bdccb86cc88afb5eda13a635
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Allow access to OS developers to public apps"
              body: >-
                This allows the OS developers to see these applications with
                their

                Balena account tokens.
        - version: balena-yocto-scripts-1.12.13
          date: 2021-05-14T13:25:06.000Z
          commits:
            - hash: f7737b535ce6e81994db4225dea2a5f48607373e
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Add functions for apps management"
              body: Add utility function to manage balenaCloud apps.
            - hash: 6938b8feec5d5ac5e92ed25c702b1fc4953e931e
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Add block images getter functions"
              body: >-
                Add a set of utility functions to retrieve release images and
                parse them

                according to their labeling.
            - hash: 513b525a141ccb16796218b8b8b5a67a36faf208
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Add missing argument to function comments"
              body: This is a non-functional change.
            - hash: 899122243bf47c20247eaa800cd55a3ff37c4886
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy-block: Create public app if required"
              body: >-
                The script will, given the correct token, create a public app if
                it does

                not exist.
            - hash: 5a86b9edc5e91c9164a976eb4c4f5ba41141c830
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Fix device installation path when running in helper
                container"
              body: >-
                Several functions require to know where the device installation
                directory

                is, and this differs when the scripts are copied to a container.
            - hash: 960f754b2b86a9264155bf9763b148674a5e2db5
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy: Fix device installation path when running in helper
                container"
              body: >-
                Several functions require to know where the device installation
                directory

                is, and this differs when the scripts are copied to a container.
        - version: balena-yocto-scripts-1.12.12
          date: 2021-05-12T09:20:22.000Z
          commits:
            - hash: 86d1af439c807258eaa577e50dfb8a172f50f9af
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-docker: Adapt to be used from POSIX shell"
              body: Also, fix indentation to use tabs.
            - hash: ba5fbfd03adea5895f88c7dd2e9223d5fbee33f0
              author: Alex Gonzalez
              footers:
                change-type: patch
                changelog-entry: Generalize balena-docker to any engine
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-docker: Generalize functions to any engine"
              body: This is so it can be used both for balena-engine and docker.
            - hash: adbe6807cbdd603a229bc466a9e954b9bbef9cfc
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Re-enable the container's output"
              body: Remove the pseudo tty from the docker run command.
            - hash: 9fb2417d73e8e5f4a0eeb0d457aac0b0327c8c49
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Add option to keep local containers"
              body: >-
                This is helpful when developing locally not to continuously
                download

                the helper images.
            - hash: 8d7b725471e27ea8d4eb21d68b1e9855d4f5bbf1
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "yocto-build-env: Update Dockerfile to add host tools dependencies"
              body: >-
                In preparation for replacing docker with balena-engine, add the
                required

                host dependencies.
            - hash: 8462659f7d2d738fcf736ce89085224d8ae79d3b
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: Shorten installation directory '/yocto/resin-board' to '/work'
              body: >-
                The installation directory is currently "/yocto/resin-board".
                This is

                too long for the creation of per-task balena-engine sockets which have

                a maximum path length of 104 characters.

                This commit replaces the installation directory with "/work".
        - version: balena-yocto-scripts-1.12.11
          date: 2021-05-11T19:09:14.000Z
          commits:
            - hash: 35d9b65e8078215c5240132add8d48331a37c2da
              author: Kyle Harding
              footers:
                change-type: patch
                signed-off-by: Kyle Harding <kyle@balena.io>
              subject: Substitute device type in config.js if present
              body: null
        - version: balena-yocto-scripts-1.12.10
          date: 2021-04-28T13:19:51.000Z
          commits:
            - hash: e702ddec1b9ee297f212ff6f2d74a26cee9448ee
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: print submodule status"
              body: >-
                Print the details of all submodules so that layers that are not
                part of

                bblayers, like balena-yocto-scripts, also get their sha1s displayed on

                build.
            - hash: 562d2120770041a50f7daebbf4660ccace1ee51f
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Correctly pass development images flag and amend usage"
              body: >-
                The development image flag is not being correctly passed to
                barys.

                Also, attemps to make the usage instructions clearer.
        - version: balena-yocto-scripts-1.12.9
          date: 2021-04-22T09:11:29.000Z
          commits:
            - hash: c897e1a23ea163180100cf0b4bd90ae207535fbd
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Pass the API environment to the build container"
              body: This allows to target builds to non-production environments.
            - hash: 4fb71f2d09e621ef6a070dd8e28f093a8a81adf0
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Add function to resolve between contract slugs and Yocto
                machines"
              body: >-
                Some device types have different Yocto machine names than
                contract

                slugs, so provide a function to translate.
            - hash: 4e8425ceab16ea6ad516438c8ffd5b968e0feaa0
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Do not exit if no SSH_AUTH_SOCK defined"
              body: >-
                Environment that build public device types will probably have no
                use

                for ssh authentication, so print a warning but  go on.
            - hash: ee9533ec9c3cdf8236cd92fe37aa382d5cc19214
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Fix indentation"
              body: No functional changes.
            - hash: 5131302a1cb8351d5b05b41249a7808af5935a73
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Cleanup build containers and enable build output"
              body: |-
                It is useful to know what the build output is. Also, not leaving
                containers around is important for the builders storage size.
        - version: balena-yocto-scripts-1.12.8
          date: 2021-04-15T10:50:06.000Z
          commits:
            - hash: 554cb42fad058032a093258bd779989d5f815941
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Fix development image build"
              body: >-
                The development image flag is being set to the variant instead
                of a

                yes/no string.
            - hash: d83f1779fe8771f3e8fb0ad1e4a5ca3b2d0928fa
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build-containers: Use a fixed length for the git short
                revision"
              body: >-
                The short version length could be configured differently on
                different

                git installations so this commit specifies the length.
            - hash: 22d97d0e9f887c614c3e6a14bec3167e52d85ad8
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Do not err when sourcing without a repository"
              body: >-
                A global variable uses git to retrieve a sha1 revision. If this
                fails

                with the errexit option the script exists after sourcing this file.

                This commit masks the error as it may not be needed in the sourcing

                script.

                Also, fix the length of the short git release to avoid different git

                clients configuration mismatches.
        - version: balena-yocto-scripts-1.12.7
          date: 2021-04-12T15:58:51.000Z
          commits:
            - hash: 8e98a1347803e53d2d3a4d77fded345adf1671ad
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Improve logs when setting version"
              body: >-
                The set release version function would print a success message
                even when

                the patch operation failed.
            - hash: f53f813640d8104c5a9d2028c22e2b9d7725f070
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-docker: Make it less verbose"
              body: Hide debug messages unless the DEBUG variable is set.
            - hash: 86a275ad03a07223ce42cb3c704211b71922f73d
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy: Set the OS version before setting deploy directory"
              body: The local build directory is expected to include the OS version.
        - version: balena-yocto-scripts-1.12.6
          date: 2021-03-30T11:32:20.000Z
          commits:
            - hash: 00153cf459855572cf94c632477c38034bb361d2
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "include: Move include files and entry scripts into its own folder"
              body: Cosmetic reorganization, no functional changes.
            - hash: 5c5669a8d6901b4a28ad952d367774e7c8cb3a90
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build.sh: Move into build script"
              body: This is a containeirized barys so it should live along barys.
            - hash: 7dbf390cdf5a88f349dac1323b1c85cf579f4cc7
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Set default namespace if not defined"
              body: >-
                The namespace variable can point to an alternative registry and
                it is

                useful for developing. This commit sets the default when not defined.
        - version: balena-yocto-scripts-1.12.5
          date: 2021-03-30T08:34:48.000Z
          commits:
            - hash: a0a6a337a82bb4527d71db3d8457688fe32af02e
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy: Shellcheck warnings"
              body: Remove shellcheck warnings. No functional changes.
            - hash: 9237debc97aef84d21f042494bd4d017e29182f9
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy-block: Adjust variables for common use"
              body: >-
                This script is called either to deploy a bootable block
                (hostapp) or to

                deploy a standard block. This commit makes the environmental variables

                match for both use cases.
            - hash: 8508ea1401107cc5d0a7d3c3026b57bbc5f69bb4
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy-block: Fix shellcheck warnings"
              body: No functional changes, just fixing linter warnings.
            - hash: 0f6b0753c8d8deffc62f58717528f4f577d85eb3
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy: Adjust balena_deploy_hostapp to new balena_deploy_block
                entrypoint arguments"
              body: >-
                The arguments to balena-deploy-block.sh have been modified so it
                can be

                used from multiple places.
            - hash: c65bdb09be42904dce36ec4bb9c44804329ccd41
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy.inc: Pass API environment to balena_lib_token"
              body: Also, do not exit on error but return.
            - hash: c9d8f8299c5ad6a720d596f8d2b5a6a458fa31c7
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Pass an API environment to balena_lib_token"
              body: Assure logging to the desired environment.
            - hash: 1c479d353fcbf5c1289e3ea52fb0f769d43bd99b
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Pass API environment to balena_lib_token"
              body: Assure which environment we will log into.
        - version: balena-yocto-scripts-1.12.4
          date: 2021-03-29T12:15:27.000Z
          commits:
            - hash: 6ecd2184bad07ff9226d96de67bb19af03aa367b
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Add is_dt_private function"
              body: >-
                This looks for a device type JSON file and outputs whether the
                device is

                a private type.
            - hash: 6ca8f284de6d94e0d9db3e50f31410142080fefa
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Add several function to extract device details from device
                type JSON file"
              body: These are utility functions used from other scripts.
            - hash: a275b3ab8f5bc1ae3a6ec7545dfc0f4faca725cf
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: By default only login to BaleneCloud if not token is
                found"
              body: This avoids redundant logging call to the API.
            - hash: 4a83bb9c440059a2e1c153a70385b5bb6e312ebf
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena_deploy: Add functions to deploy Jenkins artifacts to S3 and
                dockerhub"
              body: >-
                These have been extracted from `jenkins_buils.sh` so that they
                can be

                reused if required.
            - hash: c02c3d7467d4127cb4611afb5fc3388a7d417600
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy: Fix indentation and shellcheck warnings"
              body: Non functional cosmetic changes.
            - hash: cb77f35d4e52f7e44af458746a2e1ba1e1b8c8a6
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Call out to script libraries functions"
              body: This simplies the script and makes it more legible.
        - version: balena-yocto-scripts-1.12.3
          date: 2021-03-26T18:28:05.000Z
          commits:
            - hash: 47fa0f615a7f884673109b482631f3abcfc2a374
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Fix indentation to tabs"
              body: Match the file style and use tabs to indent. Only cosmetic changes.
        - version: balena-yocto-scripts-1.12.2
          date: 2021-03-26T18:13:45.000Z
          commits:
            - hash: 6c842342f475915d622ea8f55fe5c5f9b7c45b8e
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-docker: Remove execution trace flag"
              body: This is a leftover from development.
        - version: balena-yocto-scripts-1.12.1
          date: 2021-03-25T08:55:29.000Z
          commits:
            - hash: 29a08c98639c68d146b9e4c9f36121c81f098cf2
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Add commonly used utility functions"
              body: >-
                Add functions to obtain Balena environment, token and login to
                the cloud,

                as well as to retrieve both OS and meta-balena versions.
            - hash: bb538a7010b47b17a11e26f800feed162d712d2f
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build-containers: Allow docker login for local development"
              body: >-
                Only fix user and password from environment when in a Jenkins
                context.

                This allows to rebuild and deploy helper images to user repositories for

                local development
            - hash: 295800c173833e6857258faaf1ace2a09dc7339a
              author: Alex Gonzalez
              footers:
                change-type: patch
                changelog-entry: Add bitbake-args argument to barys and make bitbake-target
                  accept multiple arguments
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "barys: Add bitbake-args argument and make bitbake-target accept
                multiple arguments"
              body: >-
                This commit extends barys so it accepts a list of bitbake
                arguments

                and/or target images. This will allow the flexibilty needed to build

                blocks with barys as frontend.
            - hash: bc926eecd3d7acb629b3709a3e89e935ae0f18c5
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Separate deploy functions"
              body: |-
                In future we will stop deploying to dockerhub and deploy only to
                balenaCloud.
            - hash: 0c52eeb67ff088b27569b304ee7547a24aef3c29
              author: Alex Gonzalez
              footers:
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Refactor balena_lib_get_os_version"
              body: null
            - hash: ceded8430b5b404ed5157e0decf1f95a8cd09d52
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-api: Add script library with API calls"
              body: >-
                This library is to be sourced by scripts that need to use the
                API to

                obtain app or image specific information.
            - hash: dd5fa7375182bd03d2e37a53af7982d2d96ce825
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-push-os-version: Rename to balena-deploy-block and set the
                release version on deploy"
              body: >-
                Until "balena deploy" has this functionality let's perform a
                direct

                API call.

                Production versions have the OS release name and development versions get

                appended a .dev suffix. Once both image variants are merged only the OS

                release name will be used.
            - hash: f3c8ea277d799ca3c9ae5c263e08db332d40aac6
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "Dockerfile_balena-push-env: Refactor to use balena-deploy-block"
              body: Rename to use balena-deploy-block.
            - hash: 576b5dc53fa04709111866b290f31fda62740867
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-build: Split build related functions"
              body: This script can be used standalone to call barys on a containerized
                environment.
            - hash: d924527622c55e584889ebbb91e0500e8cbd21d4
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Separate barys build functions"
              body: >-
                Separate the call to barys to a scritpt library so it can be
                reused from

                other scripts.
            - hash: 9067812829783ad75636917b82c3229746c10c51
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-deploy: Add script library for deploy logic"
              body: >-
                Centralize all the deploy login in one script library starting
                with

                balena_deploy_hostapp.
            - hash: 0ab60de60dc2e45f222b07acb7283cde02131863
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Use balena_deploy_hostapp from balena-deploy"
              body: Use the same function call on all scripts that require to push a hostapp.
        - version: balena-yocto-scripts-1.12.0
          date: 2021-03-25T08:47:27.000Z
          commits:
            - hash: 5df25c78ca0b0ad68013e4b7e3cd2ef50e55e785
              author: Kyle Harding
              footers:
                change-type: minor
                changelog-entry: Improve template layer matching
                signed-off-by: Kyle Harding <kyle@balena.io>
              subject: "barys: Improve template layer matching"
              body: >-
                The current method does not support multiple layers named with
                names

                following `meta-balena-*` so this change will search for the required

                `bblayers.conf.sample` file before assigning the template layer.
        - version: balena-yocto-scripts-1.11.2
          date: 2021-03-22T19:46:16.000Z
          commits:
            - hash: ac91198049a0bae1ced3c05e9b795f1e78b69370
              author: Alex Gonzalez
              footers:
                change-type: patch
                changelog-entry: Allow to specify which containers to build and login to
                  dockerhub so that they can be deployed
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build-container: Do not overwrite environment DOCKERFILES
                variable if provided"
              body: >-
                Also, do not duplicate the variable that specifies current
                script directory

                and perform a docker login so that new images can be deployed.
            - hash: 1fe8f585cef6ca9592d1ee3929d32b838f272833
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Rename to balena-lib.inc"
              body: This indicates it is to be sourced and not executed.
            - hash: e9d3dc9c9816a72cbd62f0b247c36364fe168be5
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "balena-lib: Rename functions with the balena_lib prefix"
              body: >-
                This makes them easy to identify and makes it clear where they
                come from

                making the code more legible.

                Also, remove balena login from `balena_lib_docker_pull_helper_image` function

                as the login is performed by the container deployment script.
            - hash: 111843536ad9c951f0850256b8a56d9f4c612816
              author: Alex Gonzalez
              footers:
                change-type: patch
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              subject: "jenkins_build: Use balena-lib.inc instead of balena-inc.sh"
              body: Adapt to the refactoring of balena-lib.
  version: 2.79.4+rev1
  date: 2021-05-24T10:08:21.990Z
- commits:
    - subject: Revert to balena-yocto-scripts v1.11.1
      hash: cab3479ff72c82e2a951367aca59042f3061185c
      body: |
        This reverts commit ae5fd27ee87d944dedbe018a2c3eecc9fa838d2e.

        This updated version installs a newer docker version in the
        yocto-build-env helper container that has networking issues when run in
        a docker in docker configuration with the docker 17.05.0-ce available in
        the Ubuntu 17.04 builder nodes.

        This will need to be resolved before updating.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Revert to balena-yocto-scripts v1.11.1
        changelog-entry: Revert to balena-yocto-scripts v1.11.1
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.73.10+rev2
  date: 2021-04-16T08:25:59.103Z
- commits:
    - subject: Update meta-balena from v2.72.1 to v2.73.10
      hash: 613e47edaf7d630fa529011c98b910d0bd34ccc1
      body: |
        Update to latest revision.
      footer:
        Changelog-type: patch
        changelog-type: patch
        Changelog-entry: Update meta-balena from v2.72.1 to v2.73.10
        changelog-entry: Update meta-balena from v2.72.1 to v2.73.10
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Update  balena-yocto-scripts from v1.11.1 to v1.12.8
      hash: ae5fd27ee87d944dedbe018a2c3eecc9fa838d2e
      body: |
        Update to latest revision.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update  balena-yocto-scripts from v1.11.1 to v1.12.8
        changelog-entry: Update  balena-yocto-scripts from v1.11.1 to v1.12.8
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.73.10+rev1
  date: 2021-04-15T11:07:29.685Z
- commits:
    - subject: Rename resin image types to balena
      hash: 4758caf72e99ac1fae2d174420be01c9522e605f
      body: |
        Rename resin image types to balena and replace RESIN_ env vars
      footer:
        Changelog-entry: Rename resin image types to balena
        changelog-entry: Rename resin image types to balena
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
    - subject: Update meta-balena from v2.68.1 to v2.72.0
      hash: 5ebcb0180b1daacc498df4dc9c3bf5aa41de3713
      body: |
        Update meta-balena from 2.68.1 to 2.72.0
      footer:
        Changelog-entry: Update meta-balena from v2.68.1 to v2.72.0
        changelog-entry: Update meta-balena from v2.68.1 to v2.72.0
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested:
        - commits:
            - subject: "os-config: Update os-config from v1.1.4 to v1.2.0"
              hash: 76bae0c1e32d82b0371d99094965538a05fa3387
              body: |
                Update os-config from 1.1.4 to 1.2.0
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested:
                - commits:
                    - subject: "os-config: rename flasher flag path"
                      hash: 3622cc8cdf38f42c1f38fb6d5c67dde16631d6f0
                      body: >
                        As part of a full rename away from legacy resin
                        namespaces the

                        following os-config compatibility changes are required to align

                        with meta-balena changes.


                        - rename resin-image-flasher to balena-image-flasher
                      footer:
                        Change-type: minor
                        change-type: minor
                        Connects-to: https://github.com/balena-os/meta-balena/pull/2118
                        connects-to: https://github.com/balena-os/meta-balena/pull/2118
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                  version: os-config-1.2.0
                  date: 2021-02-23T20:19:36.114Z
            - subject: Rename resin image types to balena
              hash: 057621ad646f1958328c688994ef7f6fb48b9012
              body: |
                As part of a full rename away from legacy resin namespaces the
                following components have been renamed:

                - resinos-img -> balenaos-img
                - image_types_resin -> image_types_balena
                - image-resin -> image-balena
                - resin-image -> balena-image
                - resin-image-flasher -> balena-image-flasher
                - resin-image-initramfs -> balena-image-initramfs
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Rename resin image types to balena
                changelog-entry: Rename resin image types to balena
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.72.0
          date: 2021-03-10T20:00:01.558Z
        - commits:
            - subject: Apply aufs patches if aufs is present in kernel config
              hash: 8094dc7a3a36cfc4f1c0da5be66dc666e29b7dbe
              body: >
                Allow installing and patching aufs even if BALENA_STORAGE is
                overlay2
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Apply aufs patches if aufs is present in kernel config
                changelog-entry: Apply aufs patches if aufs is present in kernel config
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.71.7
          date: 2021-03-08T13:49:52.854Z
        - commits:
            - subject: "grub-efi: build required modules into grub image"
              hash: 5e1004d6753025166c40b11af117e008feb875f1
              body: >
                grub-efi requires modules to be installed in the boot partition,
                and

                resin-image installs them from ${DEPLOYDIR}.


                A normal grub installation installs those modules to ${PREFIX}/${libdir}

                to allow grub tooling to install them at runtime, but we're building the

                image with GRUB baked in, so we don't need those in the sysroot.


                The first iteration of this bbappend attempted to solve these

                constraints by copying the modules from ${D}/${libdir}/grub/ to

                ${DEPLOYDIR} in do_deploy(), then removing ${D}${prefix}. This had the

                unfortunate side effect of breaking the build in certain cases, such as

                clean builds or reexecuting do_deploy() without the other steps of the

                build.


                Instead, remove the unwanted files in do_install(), and append the

                required modules to GRUB_BUILDIN to create a standalone grub image

                without any external modules at all.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.71.6
          date: 2021-03-05T22:03:28.222Z
        - commits:
            - subject: "initrdscripts: always use by-uuid symlink looking for flasher rootfs"
              hash: d16ad58f6efe76c9313226735de88648e54d2420
              body: >
                If the device with flasher rootfs is slow to bring up and rootfs
                is defined

                as UUID=xxx the waiting loop in rootfs initrd script would assume UUIDs have

                just been regenerated and wait for a by-state symlink instead. This only works

                for the OS - flasher does not use the dynamically generated UUIDs

                therefore we always want to use the by-uuid link for it.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.71.5
          date: 2021-03-03T19:17:32.016Z
        - commits:
            - subject: Update OS test suite
              hash: 6c82ffb23c05e334ae2157c8e6c0f3e197467d2f
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.71.4
          date: 2021-03-01T11:03:02.277Z
        - commits:
            - subject: "balena: Make the healthcheck loading service part of balena.service"
              hash: c26f2d203a87d1578d9d52d5bbd8b0b18869916e
              body: >
                This prevents issues with the health check when the image is
                manually

                removed.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: https://github.com/balena-os/meta-balena/issues/2010
                connects-to: https://github.com/balena-os/meta-balena/issues/2010
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.71.3
          date: 2021-02-26T12:34:11.073Z
        - commits:
            - subject: "dnsmasq: enable dbus support"
              hash: 372980ca6aa6bd2793ac856c303c3b3ac4eeffdb
              body: >
                This config option is disabled by default in the upstream
                package

                so I'm including the change here as a separate commit.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: "dnsmasq: update to 2.84 with dnspooq fix"
              hash: 3afbe8dfbbaf9f73a09048e0350622535befa0a8
              body: >
                https://github.com/balena-os/meta-balena/issues/2099


                Copy dnsmasq 2.84 recipe and files from this upstream patch:


                http://cgit.openembedded.org/meta-openembedded/commit/meta-networking/recipes-support/dnsmasq?id=3e28a31bb479f292b9a052a3d2eee84c49319ee3
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.71.2
          date: 2021-02-23T19:57:37.313Z
        - commits:
            - subject: "recipes-bsp: grub: install only release modules"
              hash: 78a8049218d8ce3a9172b7fca6fe00270544e7f1
              body: >
                GRUB builds modules with both debug and release variants, with
                *.module

                and *.mod extensions respectively.


                Install only the release modules in do_deploy() to avoid balooning the

                size of the boot partition.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.71.1
          date: 2021-02-23T17:59:51.133Z
        - commits:
            - subject: "meta-balena-common: add grub-efi support"
              hash: 3bfbd05d81d59c82fb131117700325416fb152cb
              body: >
                Use upstream grub and grub-efi recipes with a new grub-conf
                recipe

                employing a config template.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.71.0
          date: 2021-02-15T17:58:51.450Z
        - commits:
            - subject: Update PR template to specify test coverage in more detail
              hash: ce0bb95e1d045ef32c377d4fc9de959c6ebbfd88
              body: >
                All PRs should include details about test coverage, including
                whether the

                tests are automated on manually recorded.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Update codeowners
              hash: a00b54679aa6804f6a5c9fa75826764cf21c5c2e
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.70.2
          date: 2021-02-12T09:31:46.288Z
        - commits:
            - subject: Add leviathan automated OS test suite
              hash: 3f6d7588874721c506a70f66603d2b153f9a6fcf
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.70.1
          date: 2021-02-11T16:18:58.778Z
        - commits:
            - subject: "systemd/timeinit: use systemd mount unit for /etc/fake-hwclock"
              hash: 7d6ec3d411af78b9b1f979b90461e9efb059e4e7
              body: >
                Replace the 'bind-etc-fake-hwclock.service' with a systemd mount

                unit (etc-fake\x2dhwclock.mount).


                Using a systemd service to bind mount the /etc/fake-hwclock directory

                results in systemd generating an internal mount unit for the same

                directory. This causes problems at shutdown when both methods try to

                unmount the directory. This frequently leads to the directory being

                unmounted before the fake-hwclock service has managed to save the

                system time. This results in an inaccurate fake-hwclock time

                at next boot and corruption of the journal log.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: "#1919 #2107"
                connects-to: "#1919 #2107"
                Changelog-entry: "systemd/timeinit: use systemd mount unit for
                  /etc/fake-hwclock"
                changelog-entry: "systemd/timeinit: use systemd mount unit for
                  /etc/fake-hwclock"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.70.0
          date: 2021-02-11T10:02:08.246Z
        - commits:
            - subject: Update balena-supervisor from v12.3.0 to v12.3.5
              hash: 8f8a57760b82a1378adc078c86bb25aeafd7d6e8
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-supervisor from v12.3.0 to v12.3.5
                changelog-entry: Update balena-supervisor from v12.3.0 to v12.3.5
                Signed-off-by: Miguel Casqueira <miguel@balena.io>
                signed-off-by: Miguel Casqueira <miguel@balena.io>
              author: Miguel Casqueira
              nested: []
          version: meta-balena-2.69.1
          date: 2021-02-03T23:42:05.644Z
        - commits:
            - subject: "openvpn: remove resin-ntp-config call from upscript.sh"
              hash: 958cd8f4bfc5d052d29c5d60c43e9ede58e39825
              body: >
                Running resin-ntp-config from openvpn upscript.sh is no longer

                necessary as it is now run automatically when config.json changes.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: "#2073"
                connects-to: "#2073"
                Changelog-entry: "openvpn: remove resin-ntp-config call from upscript.sh"
                changelog-entry: "openvpn: remove resin-ntp-config call from upscript.sh"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: "resin-vars: trigger NTP config script on config.json changes"
              hash: 8dd222087f58c596bf3d30a956c985fcb0214baa
              body: |
                Add resin-ntp-config.service to config-json.service so that the
                resin-ntp-config script is automatically run on changes to
                config.json.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: "#2073"
                connects-to: "#2073"
                Changelog-entry: "resin-vars: trigger NTP config script on config.json changes"
                changelog-entry: "resin-vars: trigger NTP config script on config.json changes"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: "resin-ntp-config: update script and add systemd service"
              hash: 7084f736b988706f71fe1d1ec95db6641be8a85e
              body: >
                Update the resin-ntp-config script to work with dynamic chrony

                source configuration. Any NTP sources configured by config.json

                are added to a chrony sources file. Changes to the sources file

                are picked up by chrony either when it starts up or at runtime

                using the chrony-helper script.


                A systemd service has been added to run the resin-ntp-config script

                once at boot. Previously the script was being run up to 8 times at

                boot via a NetworkManager dispatcher script.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: "#2073"
                connects-to: "#2073"
                Changelog-entry: "resin-ntp-config: update script and add systemd service"
                changelog-entry: "resin-ntp-config: update script and add systemd service"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: "networkmanager: add improved dispatcher scripts for NTP handling"
              hash: 23e52eaca7f0983ac6da27289fc293e43e7dbebd
              body: >
                Update the existing DHCP dispatcher script for adding NTP
                sources to

                make use of dynamic chrony source configuration. Any DHCP configured

                NTP sources for a particular interface are added to a sources file on

                network 'up' or DHCP lease renewal events. Any DHCP configured NTP

                sources for a particular interface are deleted on network 'down'

                events. Changes to the sources file are picked up by chrony either

                when it starts up or at runtime using the chrony-helper script.


                Add a dispatcher script to trigger the chrony online/offline

                status on network 'up' and 'down' events. This will make chrony

                re-run an iburst for sources when the appropriate network interface

                comes back up.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: "#2073"
                connects-to: "#2073"
                Changelog-entry: "networkmanager: add improved dispatcher scripts for NTP
                  handling"
                changelog-entry: "networkmanager: add improved dispatcher scripts for NTP
                  handling"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: "chrony: add sourcedir support and helper script"
              hash: d6c64b0a08b64593d6684605bd5268f28ff1b1c9
              body: >
                Add the 'sourcedir' parameter to the chrony configuration to
                support

                dynamic source configuration files. Any NTP source files that are

                created in 'sourcedir' (/run/chrony) can be used to update the chrony

                source configuration at runtime.


                Add a helper script to support the dynamic re-loading of chrony

                sources. This script uses the chrony 'reload sources' feature.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: "#2073"
                connects-to: "#2073"
                Changelog-entry: "chrony: add sourcedir support and helper script"
                changelog-entry: "chrony: add sourcedir support and helper script"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.69.0
          date: 2021-02-01T09:33:15.826Z
    - subject: Update balena-yocto-scripts from v1.9.0 to v1.11.0
      hash: c8ff61bec223a1a6b59ee0d7e4afd24d50f36611
      body: |
        Update balena-yocto-scripts from 1.9.0 to 1.11.0
      footer:
        Changelog-entry: Update balena-yocto-scripts from v1.9.0 to v1.11.0
        changelog-entry: Update balena-yocto-scripts from v1.9.0 to v1.11.0
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
      nested: []
  version: 2.72.0+rev1
  date: 2021-03-11T22:53:48.932Z
- commits:
    - subject: Add bluetooth support
      hash: 88cd638c13dabfe50b7bf3703149b51be379bdc7
      body: |
        This script initializes the bluetooth interface. It is modified from the
        one in meta-digi not to require the initscript package.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Add bluetooth support
        changelog-entry: Add bluetooth support
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.68.1+rev5
  date: 2021-02-19T18:25:06.367Z
- commits:
    - subject: Add u-boot environment import/export functionality
      hash: 68f9a81cd07ca1d478ca6ed85a234ba52bc0cc7d
      body: |
        The import/export environment functionality is needed for BalenaOS to
        work properly.
      footer:
        Changelog-entry: Add u-boot environment import/export functionality
        changelog-entry: Add u-boot environment import/export functionality
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
    - subject: Correct provisioning instructions for ccimx8x-sbc-pro
      hash: 09776f9eb2eb1c84541800395bb3fcbb6180700b
      body: |
        The provisioning instructions were missing steps.
      footer:
        Changelog-entry: Correct provisioning instructions for ccimx8x-sbc-pro
        changelog-entry: Correct provisioning instructions for ccimx8x-sbc-pro
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.68.1+rev4
  date: 2021-02-14T17:52:35.210Z
- commits:
    - subject: Add instructions for SD boot
      hash: 5d5c6bfdae557f601ccedf4a87a2814c24d2709b
      body: |
        The SBC has a boot microswitch that needs to be configured appropriately
        to boot from either SD card or internal eMMC storage.
      footer:
        Changelog-entry: Add instructions for SD boot
        changelog-entry: Add instructions for SD boot
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.68.1+rev3
  date: 2021-02-13T18:14:49.615Z
- commits:
    - subject: Default to B0 / 2GB / 32bits module variants
      hash: 61546866dd1e9d4c8d4ee7e2b9ec485c47b01593
      body: |
        Currently (01/2021) stocks are still serving units with a B0 SOC type.
      footer:
        Changelog-entry: Default to B0 / 2GB / 32bits module variants
        changelog-entry: Default to B0 / 2GB / 32bits module variants
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.68.1+rev2
  date: 2021-02-13T17:37:05.746Z
- commits:
    - subject: Update meta-balena from v2.65.1 to v2.68.1
      hash: 3b4ff5feb570df546c9f6fbca019a35861854509
      body: |
        Update meta-balena from 2.65.1 to 2.68.1
      footer:
        Changelog-entry: Update meta-balena from v2.65.1 to v2.68.1
        changelog-entry: Update meta-balena from v2.65.1 to v2.68.1
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: Fix task ordering for the iwlwifi_firmware_clean task
              hash: 5d039b111a964e21a637a5c7806aea6bb510a43e
              body: >
                We need to make sure the firmware cleanup function runs before

                do_populate_sysroot otherwise do_populate_sysroot will race with it and

                will fail complaining about the missing firmware that

                iwlwifi_firmware_clean had just deleted at the same time.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Fix task ordering for the iwlwifi_firmware_clean task
                changelog-entry: Fix task ordering for the iwlwifi_firmware_clean task
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.68.1
          date: 2021-01-29T13:02:49.703Z
        - commits:
            - subject: Update NetworkManager to 1.28.0
              hash: 20e9c276f8d79b6051066e24b159c8bd9ffe3bc2
              body: >
                Fixes #2075


                Needed were a number of various changes to make the package compile properly:


                Removed is 0001-wwan-Set-MTU-based-on-what-ModemManager-exposes.patch that is now

                included upstream.


                Our patch for removing HTTPS connectivity checking warning is reworked for ease of

                maintainance. It now keeps the log entry, but changes it to debug level.


                Fixed are UPSTREAM_CHECK_* definitions as they referenced a wrong version number.


                The following additional configuration options were added/removed:


                *. Introspection is disabled through `--enable-introspection=no`. Other services do

                not depend on it, so it is safe to remove it. A related patch is no longer needed

                0002-Do-not-create-settings-settings-property-documentati.patch


                *. A new option for using firewalld zone for shared mode is disabled as we do not

                use firewalld.


                *. The polkit agent option no longer is available, so `--enable-polkit-agent` and

                `--disable-polkit-agent` are no longer defined.
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Update NetworkManager to 1.28.0
                changelog-entry: Update NetworkManager to 1.28.0
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.68.0
          date: 2021-01-29T09:45:01.458Z
        - commits:
            - subject: "docs: mention balenaRootCA as a config.json parameter"
              hash: d0be88530c630d68f8582dce99442c6d94ba5455
              body: ""
              footer:
                Connects-to: https://github.com/balena-os/meta-balena/issues/2011
                connects-to: https://github.com/balena-os/meta-balena/issues/2011
                Change-type: patch
                change-type: patch
                Signed-off-by: Matthew McGinn <matthew@balena.io>
                signed-off-by: Matthew McGinn <matthew@balena.io>
              author: Matthew McGinn
              nested: []
          version: meta-balena-2.67.6
          date: 2021-01-28T17:45:30.693Z
        - commits:
            - subject: replace busybox ps with procps [klutchell]
              hash: 00556af37cf241e2b95d9b719f1ab58cc9bbddb6
              body: >
                Replace busybox ps link with ps.procps without installing

                any other procps packages. This will avoid regression and bloat

                from swapping existing busybox links with procps variants.


                By using procps as docker expects we can properly handle ps args

                such as -e and -o to format output. Busybox is only capable of this

                when compiled in "desktop" mode.


                This upstream commit to poky has already split the ps binary into

                a separate procps package:


                - https://git.yoctoproject.org/cgit/cgit.cgi/poky/commit/?id=507a47a4e5077d5f8f76d9629be6b871dfd8eb90


                So for now we can copy this recipe at the commit above into compat branches

                and use that version until we pick up a branch newer than gatesgarth.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: https://github.com/balena-os/balena-engine/issues/236
                connects-to: https://github.com/balena-os/balena-engine/issues/236
                Changelog-entry: replace busybox ps with procps [klutchell]
                changelog-entry: replace busybox ps with procps [klutchell]
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.67.5
          date: 2021-01-27T18:47:18.617Z
        - commits:
            - subject: Update aufs4 and aufs5 kernel patches
              hash: 62231bee3dd12698522130b224371ff82a3de567
              body: |
                We update to the newest patch revisions from upstream
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update aufs4 and aufs5 kernel patches
                changelog-entry: Update aufs4 and aufs5 kernel patches
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.67.4
          date: 2021-01-27T11:08:07.030Z
        - commits:
            - subject: "kernel-headers-test: Install python dependency"
              hash: 6b648fa36bb8f7b2f90799a9c331210e34d3c438
              body: |
                Some makefiles for the kernel modules build, like for
                instance the one in the kernel for the lec-px30 machine,
                want python to be available in the environment. Let's add
                it to the build dependencies.
              footer:
                Change-type: Patch
                change-type: Patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.67.3
          date: 2021-01-15T11:10:16.824Z
        - commits:
            - subject: Fix pppd timeout when launched by NetworkManager
              hash: e86c83e9be007bbedf5bad8bb961931c4f4f649c
              body: >
                Fixes #1846


                UART modems (RaspberryPi HATs) are not working currently under

                balenaOS as NetworkManager times out while attempting to establish

                ppp connection. This is not a balenaOS specific issue.


                This commits adds a `connect ""` declaration to `/etc/ppp/options`

                to workaround this as the NULL default value causes the timeout.


                The connect option specifies an external script to establish the

                physical link. When using NetworkManager/ModemManager it is

                ModemManager that establishes the physical link before passing it

                to NetworkManager. Thus `connect` should be empty.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Fix pppd timeout when launched by NetworkManager
                changelog-entry: Fix pppd timeout when launched by NetworkManager
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.67.2
          date: 2021-01-14T12:39:10.901Z
        - commits:
            - subject: "resin-device-register: Fix post provisioning state not reported"
              hash: 62016c3931c08cbc4c4bdb1e4069c6f9d9533b04
              body: >
                Starting with dee971c0dbeb6e8363f3e321af582e99627626e9, flasher

                images, which don't contain a supervisor version, try to register

                in the API using the parameter supervisor_version='null'.


                However, the API expects this parameter to be unset completely if

                there's no version to be reported during registration, otherwise

                the call fails and the device doesn't show up in dashboard during

                flashing or report the post-provisioning state.
              footer:
                Change-type: Patch
                change-type: Patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.67.1
          date: 2021-01-13T14:55:01.572Z
        - commits:
            - subject: Update balena-supervisor from v12.2.11 to v12.3.0
              hash: fc41d16085b331d032a3666fc25af7c43eee5369
              body: ""
              footer:
                Changelog-entry: Update balena-supervisor from v12.2.11 to v12.3.0
                changelog-entry: Update balena-supervisor from v12.2.11 to v12.3.0
                Change-type: minor
                change-type: minor
                Signed-off-by: Felipe Lalanne <felipe@balena.io>
                signed-off-by: Felipe Lalanne <felipe@balena.io>
              author: Felipe Lalanne
              nested: []
          version: meta-balena-2.67.0
          date: 2021-01-12T13:41:49.881Z
        - commits:
            - subject: Respect custom CA in supervisor
              hash: 4cf82392c78d804a18737de80dcfa6f8f34d0494
              body: >
                This is necessary because node has its own built-in CA bundle
                and ignores

                the system-wide bundle. Bind-mount the system-wide bundle to the supervisor

                container as well to keep the previous behavior. Make it read-only though,

                any modifications should be performed by the host OS.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Respect custom CA in supervisor
                changelog-entry: Respect custom CA in supervisor
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.66.3
          date: 2021-01-12T09:38:46.408Z
        - commits:
            - subject: "README: Rename resin-logo to balena-logo."
              hash: 47a7a0ab9a99ea45b4fcf4e684d973088328eca9
              body: >
                The file rename happened in v2.51 but the README has not been
                updated

                accordingly.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.66.2
          date: 2021-01-11T17:30:40.806Z
        - commits:
            - subject: "kernel-devsrc: use upstream recipe starting with dunfell"
              hash: 1300a223f5b58dd4584b62e87df41ec72f783961
              body: |
                Remove the kernel-devsrc package from meta-balena and
                use the one from the upstream Poky project instead.

                Initially I hoped thud and warrior could also use the respective
                upstreams but I see several differences between the meta-balena
                version and the upstreams so I updated those compat layers
                as well.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: "gen_mod_headers: add missing arch headers to tools"
              hash: 5485f1fbc901a04eedbcc3b72cc95fdfb2d03665
              body: >
                Upstream changes to the kernel have switched to a shared x86

                insn decoder required by tools/objtool so we must add those

                include and lib components to our target dir.


                https://lore.kernel.org/lkml/20190830201021.utzjr6cs5hoxygyi@treble/T/
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.66.1
          date: 2021-01-04T13:06:56.017Z
        - commits:
            - subject: "chrony: bump to version 4.0"
              hash: 67e8632a8a6c82dcf382b0204af40b79dd1a279a
              body: |
                Update chrony from version 3.4 to version 4.0.

                The new version has enhancements and new features that will
                help to improve time synchronisation, including:

                - the ability to add server pools via scripts using chronyc.
                - support for dynamic NTP source files that can be reloaded
                  as necessary (useful for DHCP and config.json sources).
                - source name options for improved handling of pool addresses.
                - repeat 'iburst' when a source is changed from offline to
                  online state.
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: "chrony: bump to version 4.0"
                changelog-entry: "chrony: bump to version 4.0"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.66.0
          date: 2020-12-18T11:02:16.858Z
  version: 2.68.1+rev1
  date: 2021-02-13T12:46:04.848Z
- commits:
    - subject: Add support for the ConnectCore 8X SBC Pro modules
      hash: cc44af50702286070b9e21f37ba526a3ce5e7bb6
      body: |
        This commit add the svg icon and the device type definition for Digi's
        ConnectCore 8X SBC Pro.
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Add support for the ConnectCore 8X SBC Pro modules
        changelog-entry: Add support for the ConnectCore 8X SBC Pro modules
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2.65.1+rev1
  date: 2021-01-21T18:44:32.559Z
